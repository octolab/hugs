{{- $ga := .Param "googleAnalytics" | default .Site.GoogleAnalytics -}}

{{- if not (findRE "127.0.0.1|localhost" .Site.BaseURL) -}}{{- /* TODO .Site.IsServer */ -}}
<script async src="https://www.googletagmanager.com/gtag/js?id={{ $ga }}"></script>
<script>
(function (scope) {
    scope.dataLayer = scope.dataLayer || [];
    scope.gtag = function () { dataLayer.push(arguments); }
    scope.gtag('js', new Date());
    scope.gtag('config', '{{ $ga }}');
})(window);
</script>
{{- end -}}
